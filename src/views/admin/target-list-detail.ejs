<%- include('partials/header') %>

<div class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <h3 class="text-lg font-semibold"><%= list.name %></h3>
      <p class="text-sm text-gray-500"><%= total.toLocaleString() %> phone numbers</p>
    </div>
    <a href="/admin/targets" class="text-sm text-gray-500 hover:text-gray-700 transition">â† Back</a>
  </div>

  <!-- Upload More -->
  <div class="bg-white dark:bg-gray-900 rounded-2xl p-5 border border-gray-100 dark:border-gray-800">
    <h4 class="font-medium mb-3 text-sm">Add More Numbers</h4>
    <form method="POST" action="/admin/targets/<%= list.id %>/upload" enctype="multipart/form-data" class="flex gap-3">
      <input type="file" name="csv" accept=".csv,.txt" required class="flex-1 text-sm file:mr-3 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-medium file:bg-brand-100 file:text-brand-700 hover:file:bg-brand-200">
      <button type="submit" class="px-6 py-2 bg-brand-500 text-white rounded-xl text-sm font-medium hover:bg-brand-600 transition">Upload</button>
    </form>
  </div>

  <!-- Numbers Table -->
  <div class="bg-white dark:bg-gray-900 rounded-2xl border border-gray-100 dark:border-gray-800 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead class="bg-gray-50 dark:bg-gray-800/50">
          <tr>
            <th class="text-left px-4 py-3 font-medium text-gray-500 dark:text-gray-400">#</th>
            <th class="text-left px-4 py-3 font-medium text-gray-500 dark:text-gray-400">Phone Number</th>
            <th class="text-left px-4 py-3 font-medium text-gray-500 dark:text-gray-400">Added</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
          <% rows.forEach((item, i) => { %>
          <tr class="hover:bg-gray-50 dark:hover:bg-gray-800/30 transition">
            <td class="px-4 py-2 text-gray-400 text-xs"><%= (page - 1) * 50 + i + 1 %></td>
            <td class="px-4 py-2 font-mono text-sm"><%= item.phone_number %></td>
            <td class="px-4 py-2 text-gray-400 text-xs"><%= new Date(item.created_at).toLocaleDateString() %></td>
          </tr>
          <% }); %>
          <% if (!rows.length) { %>
          <tr><td colspan="3" class="px-4 py-8 text-center text-gray-400">No numbers in this list</td></tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>

  <% if (totalPages > 1) { %>
  <div class="flex justify-center gap-2">
    <% for (let i = 1; i <= totalPages; i++) { %>
    <a href="/admin/targets/<%= list.id %>?page=<%= i %>" class="px-3 py-1.5 text-sm rounded-lg <%= i === page ? 'bg-brand-500 text-white' : 'bg-white dark:bg-gray-900 text-gray-600 border border-gray-200 dark:border-gray-700' %> transition"><%= i %></a>
    <% } %>
  </div>
  <% } %>
</div>

<%- include('partials/footer') %>
